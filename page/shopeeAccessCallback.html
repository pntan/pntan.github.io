<script type="module">
	async function getUrlServer(){
		var time = Date.now();
		const url = `https://pntan.github.io/chuanmuangrok.json?timestamp=${time}`;

		try {
			const response = await fetch(url, {
				cache: "no-store"
			});
			if (!response.ok) throw new Error('Network response was not ok');
			const data = await response.json();
			return data.url;
		} catch (error) {
			console.error('Lỗi khi fetch URL từ GitHub:', error);
			return null;
		}
	}

	// ✅ dùng Promise thay cho await
	getUrlServer().then(url_server => {
		console.log("URL server:", url_server);
		var href = (window.location.href);
		if (url_server) {
			var href = window.location.href;

			href = href.split("?");

			var query = href[href.length - 1];

			window.location = `${url_server}/shopee/accessTokenCallback?${query}`;
		}
	});
</script>


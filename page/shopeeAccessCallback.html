<script type="text/javascript">
	async function getUrlServer(){
		var owner = 'pntan';
		var repo = 'TPTOOL';
		var path = 'urlNgrok'; // tên file chứa URL
		var branch = 'main';

		try {
			// Lấy file từ GitHub API
			var res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}?_=${Date.now()}`, {
				headers: {
					Authorization: `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`,
				}
			});
			var json = await res.json();
			console.log(json);
			var content = atob(json.content); // Giải mã base64
			var url = content.trim();

			return url;
		} catch (e) {
			console.error("Không thể lấy URL từ GitHub:", e.message);
		}
	}

	// ✅ dùng Promise thay cho await
	getUrlServer().then(url_server => {
		console.log("URL server:", url_server);
		console.log(window.location.href);
		if (url_server) {
			serverConnect(url_server);
		}
	});
</script>
